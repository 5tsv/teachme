{
  "bookSourceComment": "为天地立心，为生民立命，为往圣继绝学，为万世开太平。   \n                                 ——宋代 · 张载",
  "bookSourceGroup": "自制",
  "bookSourceName": "菁华茗书阁",
  "bookSourceType": 0,
  "bookSourceUrl": "https://jhmsg.cn/##源社区= =",
  "bookUrlPattern": "https://jhmsg.cn/.+.html",
  "customOrder": 0,
  "enabled": true,
  "enabledCookieJar": false,
  "enabledExplore": true,
  "exploreUrl": "[{\"title\":\"经\",\"url\":\"https://jhmsg.cn/jing/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":1}},{\"title\":\"儒家\",\"url\":\"https://jhmsg.cn/jing/ru/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"易類\",\"url\":\"https://jhmsg.cn/jing/yi/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"小學\",\"url\":\"https://jhmsg.cn/jing/xiaoxue/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"四書\",\"url\":\"https://jhmsg.cn/jing/sishu/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"禮類\",\"url\":\"https://jhmsg.cn/jing/lilei/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"春秋\",\"url\":\"https://jhmsg.cn/jing/chunqiu/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"孝經類\",\"url\":\"https://jhmsg.cn/jing/xiaojinglei/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"詩類\",\"url\":\"https://jhmsg.cn/jing/shilei/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"書類\",\"url\":\"https://jhmsg.cn/jing/shu/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"史\",\"url\":\"https://jhmsg.cn/shi/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":1}},{\"title\":\"正史\",\"url\":\"https://jhmsg.cn/shi/zhengshi/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"紀事本末\",\"url\":\"https://jhmsg.cn/shi/jishibenmo/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"雜史\",\"url\":\"https://jhmsg.cn/shi/zashi/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"編年\",\"url\":\"https://jhmsg.cn/shi/biannian/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"別史\",\"url\":\"https://jhmsg.cn/shi/bieshi/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"子\",\"url\":\"https://jhmsg.cn/zi/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":1}},{\"title\":\"雜家\",\"url\":\"https://jhmsg.cn/zi/zajia/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"小説\",\"url\":\"https://jhmsg.cn/zi/xiaoshuo/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"道家\",\"url\":\"https://jhmsg.cn/zi/daojia/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"兵家\",\"url\":\"https://jhmsg.cn/zi/bing/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"法家\",\"url\":\"https://jhmsg.cn/zi/fa/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"藝術類\",\"url\":\"https://jhmsg.cn/zi/yishu/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"集\",\"url\":\"https://jhmsg.cn/ji/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":1}},{\"title\":\"別集\",\"url\":\"https://jhmsg.cn/ji/bieji/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"楚辭\",\"url\":\"https://jhmsg.cn/ji/chuci/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"文評\",\"url\":\"https://jhmsg.cn/ji/wenping/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"總集\",\"url\":\"https://jhmsg.cn/ji/zongji/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":0.25}},{\"title\":\"四库之外\",\"url\":\"https://jhmsg.cn/other/<,page/{{page}}/>\",\"style\":{\"layout_flexGrow\":1,\"layout_flexBasisPercent\":1}}]",
  "lastUpdateTime": 1741558853383,
  "loginUi": "[ {\n        name: \"↓只对 未设置过书籍变量 的书籍生效↓\",\n        type: \"button\",\n        action: \"getToast()\"\n    },   {\n        name: \"  >> 标示正文  \",\n        type: \"button\",\n        action: \"zhengwen()\"\n    },   {\n        name: \"  >> 标示注释  \",\n        type: \"button\",\n        action: \"zhushi()\"\n    },  {\n        name: \"  >> 隐藏注释  \",\n        type: \"button\",\n        action: \"guanbi()\"\n    },  {\n        name: \"  >> 设置简体  \",\n        type: \"button\",\n        action: \"setSimple()\"\n    },  {\n        name: \"  >> 恢复默认  \",\n        type: \"button\",\n        action: \"qingchu()\"\n    }\n]",
  "loginUrl": "function getToast(){\ttoa=\"5Y6f5L2cQOmBh+efpQrkv67lpI1ieeays+m5heWSjArlj5HnjrBieeaDheaXoOe+gQrmraPmloflj4rmoIfnpLrlip/og71ieT0gPQ==\";\n\tjava.longToast(java.base64Decode(toa))\n\t};\nfunction zhushi(){\n\tsource.setVariable(\"注\");\n\tjava.toast(\"已设置为“标示注释”\")\n\t};\nfunction zhengwen(){\n\tsource.setVariable(\"正\")\n\tjava.toast(\"已设置为“标示正文”\")\n\t};\nfunction guanbi(){\n\tsource.setVariable(\"隐\");\n\tjava.toast(\"已设置为“隐藏注释”\")\n\t};\nfunction setSimple(){\n\tsource.setVariable(\"简\");\n\tjava.toast(\"已设置为“正文简体”\")\n}\nfunction qingchu(){\n\tsource.setVariable(\"\");\n\tjava.toast(\"已清除设置\")\n\t}",
  "respondTime": 180000,
  "ruleBookInfo": {
    "author": ".book-metas li.0@textNodes",
    "coverUrl": ".thumb-image@src",
    "init": "<js>\n/*\ny=source.getVariable();\nif(book.getVariable(\"custom\")==\"\"){\nbook.putVariable(\"custom\",y)}\n*/\nresult\n</js>",
    "intro": "<br>\n{{@@.book-metas span.1@textNodes}}：{{@@.book-metas li.1@textNodes}}\n\n{{@@.book-metas span.3@textNodes}}：{{@@.book-metas li.3@textNodes}}\n\n{{@@.entry-content@html}}\n————————\n当前设置：【{{t=book.getVariable(\"custom\");String(t)}}】\n可在登录界面或右上角书籍变量中更改",
    "kind": ".book-metas@li.2@a@text",
    "name": ".book-metabox h2@text"
  },
  "ruleContent": {
    "content": "<js>\nfunction textToSvg(text,svg) {\n\tsvg=`<svg viewBox=\"0 0 100 100\">${svg}${text}</text></svg>`\n\treturn `<img src=\"data:image/.svg#;base64,MA==,{'type':'${Packages.cn.hutool.core.codec.Base64.encodeUrlSafe(svg)}'}\">`\n}\nkeys={\n\t\".entry-content a\":'<text y=\"85\" font-size=\"100\" fill=\"#19c\">',\n\t\".jiazhu\":'<text y=\"85\" font-size=\"100\" fill=\"#a00000\">',\n\t\".jieshi,.zhuan\":'<text y=\"85\" font-size=\"100\" fill=\"#841\">',\n\t\".jianshu\":'<text y=\"85\" font-size=\"100\" fill=\"#069\">',\n\t\".jiaozhusup,.red-text\":'<text x=\"10\" y=\"75\" font-size=\"80\" fill=\"#B9584E\">',\n\t\".shu-p\":'<rect width=\"100\" height=\"100\"  fill=\"yellow\"></rect><text x=\"10\" y=\"75\" font-size=\"80\" fill=\"red\">',\n\t\".shu-text\": '<rect width=\"100\" height=\"100\"  fill=\"#ccc\"></rect><text x=\"10\" y=\"75\" font-size=\"80\" fill=\"#666\">',\n\t\".small-title\": '<text y=\"85\" font-size=\"100\" font-weight=\"bold\">',\n\t\".jianshu .shu-ming\":'<text y=\"85\" font-size=\"100\" text-decoration=\"underline\" fill=\"#069\">',\n\t\".jiazhu .shu-ming,.jiazhu .titles,.jiazhu .zhuanming,.jiazhu .renming\":'<text y=\"85\" font-size=\"100\" text-decoration=\"underline\" fill=\"#a00000\">',\n\t\".zhushi .zhuanming,.zhushi .renming\":'<text y=\"85\" font-size=\"100\" text-decoration=\"underline\" fill=\"rgb(84, 120, 200)\">',\n\t\".piyu .zhuanming,.piyu .renming\":'<text y=\"85\" font-size=\"100\" text-decoration=\"underline\" fill=\"#055\">',\n\t\".piyu .shu-ming,.piyu .titles\":'<text y=\"85\" font-size=\"100\" text-decoration=\"underline\" fill=\"#050\">',\n\t\".zhushi .shu-ming,.zhushi .titles\":'<text y=\"85\" font-size=\"100\" text-decoration=\"underline\" fill=\"rgb(84, 141, 212)\">',\n\t\".zhushi,.q\":'<text y=\"85\" font-size=\"100\" fill=\"rgb(84, 141, 212)\">',\n\t\t\".zhuanming,.renming\":'<text y=\"85\" font-size=\"100\" text-decoration=\"underline\">',\n\t\".shu-ming,.titles\":'<text y=\"85\" font-size=\"100\" text-decoration=\"underline\" fill=\"#666\">',\n\t\".piyu\":'<text y=\"85\" font-size=\"100\" fill=\"#050\">'\n}\n  \nt=source.getVariable()\nif(/简/.test(String(t))){result=java.t2s(result)}\ndom=org.jsoup.Jsoup.parse(result)\nfor (let i in keys){\n\t\n\tsvgTemplate=keys[i]\ndom.select(i).forEach(z=>{\n\tvalue=String(z.html())\n\ttnodes=z.textNodes()\n\ttnodes.forEach(n=>{\n\t\tvalue=(n!=\" \")?value.replace(n,(m)=>m.split(\"\").map(t=>textToSvg(t,svgTemplate)).join(\"\")):value\n\t})\t\n\tz.html(value)\n})\n}\ndom.select('.entry-content').html()\n/*\n//book.putVariable(\"custom\",\"注\")\n\nt=book.getVariable(\"custom\")\n\nif(/隐/.test(String(t))){\njava.log(\"隐藏注释\");\t\n\nb=java.getElements(\".entry-content\")\nb.select(\".zhushi,.jiazhu:not([title]),.red-text,.jieshi,.jianshu,.shanchu,sup,.foreword,.piyu,.jia,.xiu,.mo,.jianjie\").remove()\n\naa=b.html()\na=String(aa).replace(/class=\"img-text\" alt=\".{2,3}\">/g,'>  ').replace(/<ruby><br><rb><br><span class=\"kanwu\">([^<]*)<\\/span><br><\\/rb><rt>([^<]*)<\\/rt><\\/ruby>/g,' $1〔$2〕')\n\n\n}else if(/注/.test(String(t))){\n\t\n\tjava.log(\"标示注释\");\n\tb=java.getElements(\".entry-content\")\n\nb.select(\".zhushi,.jiazhu:not([title]),.jieshi,.jianshu,.foreword,.piyu,.jia,.xiu,.mo,.jianjie\").prepend(\"<br>☆【\").append(\"】<br>\")\n\naa=b.html()\n\na=String(aa).replace(/class=\"img-text\" alt=\".{2,3}\">/g,'>  ')\na=a.replace(/<span class=\"(shu-p|shu-text|hei|bai)\">([^<]*)<\\/span>/g,'[$2]').replace(/<span class=\"(shu-text|hei|bai)\">([^\\[]*)([^<]*)<\\/span>/g,'[$2]$3').replace(/<span class=\"\\w*(dai|ming|buzi)\">([^<]*)<\\/span>/g,' $2').replace(/<span class=\"(titles|shu-ming)\">([^<]*)<\\/span>/g,'《$2》').replace(/<span class=\"shu-ming\">([^<]*)<\\/span>/g,'〈$1〉').replace(/<span class=\"zhuanming\">([^<]*)<\\/span>/g,'“$1”').replace(/(<div class=\"zhushi\">)/g,'$1注释：<br>').replace(/<(span|a) class=\"(jiaozhusup|red-text)[^>]*>〔?\\[?([^<]*?)\\]?〕?<\\/(span|a)>/g,'〔$3〕').replace(/<span class=\"jiaozhu\" title=\"([^\"]*)\">([^<]*)<\\/span>/g,'$2〔$1〕').replace(/<ruby><br><rb><br><span class=\"kanwu\">([^<]*)<\\/span><br><\\/rb><rt>([^<]*)<\\/rt><\\/ruby>/g,' $1〔$2〕')\n\n}else if(/正/.test(String(t))){\n\t\n\tjava.log(\"标示正文\");\taa=java.getString(\".entry-content@html\");\n\t\t\na=String(aa)\n  //span脚注 帝号年份 section  带title校注\na=a.replace(/<span class=\"(jiaozhu|dihaonianfen|section)\">([^\\/]*)<\\/span>/g,\"$2\").replace(/<span class=\"jiaozhu\" title=\"([^>]*)\">([^<]*)<\\/span>/g,'$2】$1【')\n //删除，勘误\na=a.replace(/<span class=\"shanchu\"[^>]*><\\/span><span class=\"buzi\"[^>]*>([^<]*)<\\/span>/g,'$1').replace(/<ruby><br><rb><br><span class=\"kanwu\">([^<]*)<\\/span><br><\\/rb><rt>([^<]*)<\\/rt><\\/ruby>/g,' $1〔$2〕')\n\n  //疏字，人名地名朝代，书名，书名防漏，专名，注释，jiaozhusup（按需）\na=a.replace(/<span class=\"(shu-p|shu-text|hei|bai)\">([^<]*)<\\/span>/g,'[$2]').replace(/<span class=\"(shu-text|hei|bai)\">([^\\[]*)([^<]*)<\\/span>/g,'[$2]$3').replace(/<span class=\"\\w*(dai|ming)\">([^<]*)<\\/span>/g,' $2').replace(/<span class=\"(titles|shu-ming)\">([^<]*)<\\/span>/g,'《$2》').replace(/<span class=\"shu-ming\">([^<]*)<\\/span>/g,'〈$1〉').replace(/<span class=\"zhuanming\">([^<]*)<\\/span>/g,'“$1”').replace(/(<div class=\"zhushi\">)/g,'$1注释：<br>').replace(/(<p class=\"jieshi\">)/g,'$1☆').replace(/<(span|a) class=\"jiaozhusup[^>]*>〔?([^<]*?)〕?<\\/(span|a)>/g,'〔$2〕')\n\n  //sup套span，sub和strong标签\na=a.replace(/<sup><span[^>]*>([^<]*)<\\/span><\\/sup>/g,\"$1\")\na=a.replace(/<(sup|strong)[^>]*>([^\\/]*)<\\/(sup|strong)>/g,'$2')\n\n//p与span中间\na=a.replace(/<p>([^\\/]*)<span/g,\"<p>【$1】☆<span\")\n\n//p注释 套span注释\na=a.replace(/<p[^>]*(zhu|shi)\">([^<]*)<span[^>]*(zhu|shi|zhusup|red-text)\">([^<]*)<\\/span>([^<]*)<([^>]*)>/g,'☆$2$4$5<$6>')\n\n//p带class 到 /p span 中间\na=a.replace(/(<p[^>]*(yuanwen|em2|strong|head|shuming|margin|normal|style)[^>]*>)([^\\/]*)<(\\/p|span)/g,\"$1<br>【$3】<$4\")\n\n// /span后，/p前（不准确）\na=a.replace(/(?:<p class=\"zhushi.*)<\\/span>([^\\/]*)<\\/p>/g,\"<\\/span><a>☆$1<\\/a><\\/p>\")\na=a.replace(/<\\/span>([^\\/]*)<\\/p>/g,\"<\\/span><br>【$1】<\\/p>\")\n\n// /span后，下一带注释的span前（不准确）\na=a.replace(/(<p class=\"jieshi.*)<\\/span>([^<]+)(<span[^>]*(zhu|shi|text)\">)/g,\"<\\/span>$1$2$3\")\na=a.replace(/<\\/span>([^<]+)(<span[^>]*(zhu|shi|text|xiu|jia|mo|zhusup)\">)/g,\"<\\/span><br>【$1】☆$2\")\n\n//span jieshi\na=a.replace(/<span class=\"jieshi\">([^<]*)<\\/span>/g,'·$1·')\n\n//图片后，带注释的span前\na=a.replace(/(<img[^>]*>)([^<]*)(<span[^>]*(zhu|shi)\">)/g,'$1【$2】$3')\n\n//p到/p img\na=a.replace(/<p>([^\\/]*)(<\\/p>|<br><img)/g,\"<p><br>【$1】$2\")\n\n//p后，图片前\na=a.replace(/<p>([^\\s【][^<]*)<img/g,\"<p>【$1<img\")\n\n//图片文字，占位\na=a.replace(/class=\"img-text\" alt=\".{2,3}\">/g,'>  ')\n\n//png后，/p前（不准确）\na=a.replace(/(<p class=\"zhushi\" ?>)([^<]*<img[^<]*png\">[^<】]*)<\\/p>/g,'$1$2<a><\\/a><\\/p>')\na=a.replace(/(png\">[^<】]*)<\\/p>/g,'$1】<\\/p>')\n\n//空\na=a.replace(/【\\s*?】/,\"\").replace(/☆☆/g,'☆')\n\n\t}else{java.log(\"不区分\");\n\t\ta=java.getString(\".entry-content@html\");}\n\nif(/简/.test(String(t))){a=java.t2s(a)}\njava.log(a)\na\n*/\n</js>##【】|☆?本章完!|【<[^>]*>】",
    "imageDecode": "Packages.cn.hutool.core.codec.Base64.decode(src.split(\"'\")[3])",
    "imageStyle": "TEXT",
    "replaceRegex": ""
  },
  "ruleExplore": {
    "bookList": "",
    "bookUrl": "",
    "intro": "",
    "kind": "",
    "name": ""
  },
  "ruleSearch": {
    "author": "",
    "bookList": "#main article",
    "bookUrl": "a.0@href",
    "checkKeyWord": "",
    "coverUrl": "img@data-src",
    "intro": "p@text",
    "kind": "",
    "name": "h2 a@text"
  },
  "ruleToc": {
    "chapterList": ".book-chapters-list li a",
    "chapterName": "text",
    "chapterUrl": "href"
  },
  "searchUrl": "/search/{{java.s2t(key)}}/page/{{page}}/",
  "variableComment": "1、填入“隐”将隐藏注释（保留校注）\n2、填入“注”将标示注释（bug较少）\n3、填入“正”将标示正文（bug很多）\n4、不填或填其他文字将不作区分（可能费眼）\n5、填入“简”可将正文转换为简体（可能有误）\n6、除“简”之外其他文字不能共存\n7、如果填了没效果先清除源变量或书籍变量",
  "weight": 0
}